<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3d-package-creator</title>
    <script src="src/jszip.js"></script>
    <script src="src/jszip-utils.js"></script>
    <script src="src/filesaver.js"></script>

    <script type="text/javascript">
      console.log ("with fetch function");
      function exportZip() {
        var zip = new JSZip();
        let maincss = fetch('data/main.css')
          .then(response => response.text());
        zip.file("smile.css", maincss, {binary: true});
        
        let indexhtml = fetchFile('data/index.html');
        zip.file("index.html", indexhtml, {binary: true});
        
        zip.generateAsync({type:"blob"})
        .then(function(content) {
            // see FileSaver.js
            saveAs(content, "3d-package.zip");
        });
      }
      function fetchFile(path) {
        let x = fetch(path)
          .then(response => response.text());
        return x;
      }
        
    </script>
    
  </head>
  <body>
    <h1>3D-PACKAGE-CREATOR</h1>
    <h3>This tool is under construction... ðŸ¤“</h3>
    <input type="button" id="download" value="EigenstÃ¤ndiges 3d-Packet herunterladen" onclick="exportZip()">
  </body>
</html>
